"use strict";angular.module("royal-web-dashboard").controller("registerBankAccountsController",["$scope","$state","$http","$sce","localStorageService",function(a,b,c,d,e){function f(b,d,e){var f="https://vlxzeqtpc9.execute-api.us-west-2.amazonaws.com/test/fastLink/token?";return f=f+"appIds="+e,f=f+"&applicationToken="+b,f=f+"&userToken="+d,c({method:"GET",url:f}).then(function(b){b.data.errorMessage?(a.hideAlert=!1,a.waiting="true",console.log("Error - "+b.data.errorMessage)):(l=b.data.user.accessTokens[0].value,a.fastLinkToken=l,i(),a.waiting="true")},function(a){console.log("Error User: "+a.statusText)}),d}function g(b,d,e){var g="https://vlxzeqtpc9.execute-api.us-west-2.amazonaws.com/test/user/login",h={applicationToken:b,username:d,password:e};return c({method:"POST",url:g,data:h}).then(function(c){c.data.errorCode?(a.hideAlert=!1,a.waiting="true"):(k=c.data.user.session.userSession,a.userToken=k,f(b,k,"10003600"))},function(a){console.log("Error User: "+a.statusText)}),k}function h(){var a,b="https://vlxzeqtpc9.execute-api.us-west-2.amazonaws.com/test/application/login",d={username:"sbCobmiguelparra",password:"9fff0c71-6441-4761-b4d9-cb300439ee1a"};return c({method:"POST",url:b,data:d}).then(function(b){a=b.data.session.cobSession,g(a,e.get("username"),e.get("password"))},function(a){console.log("Error Application: "+a.statusText)}),a}function i(){var b="<script>window.onload = function(){ document.forms['add_account'].submit() }</script>",c="<form name='add_account'action='https://node.developer.yodlee.com/authenticate/restserver/' method='post' id='rsessionPost'><input type='hidden' name='rsession' value='"+k+"' id='rsession'/><br/><input type='hidden' name='app' value='10003600' id='finappId'/><br/><input type='hidden' name='redirectReq' value='true'/><br/><input type='hidden' name='token' value='"+l+"' id='token'/><br/></form>",e='<iframe width="100%" height="900" srcdoc="<html>'+b+"<body>"+c+'</body></html>"></iframe>';a.dynamicIFrame=d.trustAsHtml(e)}function j(){h()}var k,l;j(),a.hideAlert=!0,a.registerBankAccountController=function(){}}]);